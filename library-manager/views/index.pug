extends layout.pug

block content
  h1= title
  p
    a.button(href="/books/new") Create New Book

  form(method= "GET", action= `/books/search/?=${search}`)
    input.search-input(type= 'search', name='search', placeholder='Search...',value= search)
    input.search-submit(type='submit', value='search')

  if books.length == 0
    h2 Oops! 
    p No matches found.  Please try again.
    p 
      a(class='button', href='/books') Back Home
  else
    table
      thead
        tr
        th Title
        th Author
        th Genre
        th Year
      tbody
        each book in books 
          tr
            td
              a(href=`books/${book.id}`)= book.title 
            td= book.author 
            td= book.genre 
            td= book.year  
  if search
    br
    a(class= 'button' href='/books') Back Home
  else
    div
      br
      each page in pageArray 
        a(class= 'button' class= 'page' href=`/books/?page=${page+1}`)= page+1